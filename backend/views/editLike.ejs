<h4>Edit Post:</h4>

<form action="/posts/liked/<%=post._id%>/?_method=put" method="POST" style="text-align:center">
    <div class="form-group">
        <label for="Song">Song Name:</label>
        <input type="text" id="Song" name="Song" class="form-control" value="<%=post.Song%>" autocomplete="off">
    </div>
    <div class="form-group">
        <label for="Rating">Rating:</label>
        <input type="text" id="Rating" name="Rating" class="form-control" value="<%=post.Rating%>" autocomplete="off">
    </div>
    <div class="form-group">
        <label for="Author">Author:</label>
        <input type="text" id="Author" name="Author" class="form-control" value="<%=post.Author%>" autocomplete="off">
    </div>
    <div class="form-group">
        <label for="Link">Author:</label>
        <input type="text" id="Link" name="Link" class="form-control" value="<%=post.Link%>" autocomplete="off">
    </div>
    <div class="form-group">
        <label for="Notes">Notes:</label>
        <input type="text" id="Notes" name="Notes" class="form-control" value="<%=post.Notes%>" autocomplete="off">
    </div>
    <div class="form-group" style="display:inline-block; margin-right: 40px">
        <label for="Like">Like:</label>
        <input id="checkbox" type="checkbox" id="Like" name="Like" class="form-control" <% if (post.Like) {%>
        checked value="true"
        <% } %>>
    </div>
    <div class="form-group" style="display:inline-block">
        <label for="Archived">Listened:</label>
        <input id="checkbox" type="checkbox" id="Archived" name="Archived" class="form-control" <% if (post.Archived) {%>
        checked value="true"
        <% } %>
            >
    </div>


    <div style="display: flex; text-align: center;">
        <input type="submit" value="Update Post" class="btn btn-primary" ; />
        <a href="/posts/liked" class="btn btn-secondary">Cancel</a>
    </div>
</form>
<script>

    let checkboxes = document.querySelectorAll("#checkbox")
        function runChecked(checkbox) {
            if (checkbox.checked) {
                checkbox.value = true
                checkbox.setAttribute("checked", "")
            } else if (!checkbox.checked) {
                checkbox.value = false
                checkbox.removeAttribute("checked")
            }
        }
        checkboxes.forEach(checkbox => {
            checkbox.addEventListener('change', function () {
                if (this.checked) {
                    console.log("Checkbox is checked");
                    runChecked(checkbox)
                } else {
                    console.log("Checkbox is not checked");
                    runChecked(checkbox)
                }
            });
        });
    
</script>